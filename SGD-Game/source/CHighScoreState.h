////////////////////////////////////////////////////////////////////////////
//	File Name	:	"CHighScoreState.h"
//
//	Author		:	Matt DiMatteo (MD)
//
//	Purpose		:	State for input and saving of the high score table 
//					derived from the base state
//
////////////////////////////////////////////////////////////////////////////
#pragma once

#include "IGameState.h"
#include"CBitmapFont.h"
#include "SGD Wrappers/CSGD_DirectInput.h"

struct Highscore
{
	char score[64];
	char buffer[128];
	int score1;
	int place;
};

class CHighScoreState : public IGameState
{
private:
	CBitmapFont font;

	char curLetter;

	float m_fElapsedTime;
	DWORD m_dwPreviousTime;
	float timer;
	int count;

	Highscore me;
	Highscore you;

	Highscore hs[10];

	CSGD_DirectInput* m_pDI;

	bool scored;
	
	///////////////////////////////////////////////////////////////////
	//	Function:	"CHighScoreState(Constructor)"
	///////////////////////////////////////////////////////////////////
	CHighScoreState(void) {}
	CHighScoreState(const CHighScoreState&);
	CHighScoreState& operator=(const CHighScoreState&);

	///////////////////////////////////////////////////////////////////
	//	Function:	"~CHighScoreState(Destructor)"
	///////////////////////////////////////////////////////////////////
	~CHighScoreState(void) {}

public:
	///////////////////////////////////////////////////////////////////
	// Function: "GetInstance"
	//
	//  Purpose: Gets instance to the only instance of the class.
	///////////////////////////////////////////////////////////////////
	static CHighScoreState* GetInstance();

	///////////////////////////////////////////////////////////////////
	// Function: "Enter"
	//
	//  Purpose: Initializes variables and pointers upon entering the state.
	///////////////////////////////////////////////////////////////////
	void Enter();
		
	///////////////////////////////////////////////////////////////////
	// Function: "Input"
	//
	//  Purpose: Receives input from player.
	///////////////////////////////////////////////////////////////////
	bool Input();

	///////////////////////////////////////////////////////////////////
	// Function: "Update"
	//
	// Purpose: Updates game objects based on time.
	////////////////////////////////////////////////////////////////////
	void Update();

	////////////////////////////////////////////////////////////////////
	// Function: “Render”
	//
	// Purpose: Draws game objects to the screen.
	////////////////////////////////////////////////////////////////////
	void Render();

	////////////////////////////////////////////////////////////////////
	// Function: “Exit”
	//
	// Purpose: Unloads any assets aquired since entering. It does this 
	//			and then exits the state .
	////////////////////////////////////////////////////////////////////
	void Exit();

	////////////////////////////////////////////////////////////////////
	// Function: “Load”
	//
	// Purpose: Loads highscores from xml file 
	////////////////////////////////////////////////////////////////////
	bool Load(const char* szXmlFileName);

	////////////////////////////////////////////////////////////////////
	// Function: “Save”
	//
	// Purpose: Saves high scores to an xml file
	////////////////////////////////////////////////////////////////////
	bool Save(const char* szXmlFileName);

};