////////////////////////////////////////////////////////
//   File Name	:	"CSingleAnimation.h"
//
//   Author		:	Matthew Di Matteo (MD)
//
//   Purpose	:	This file provides a way to set and control
//					the animations of game objects.
////////////////////////////////////////////////////////
#pragma once

#include <windows.h>

class CSingleAnimation
{
private:
	int frameWidth;
	int frameHeight;
	int numCols;

	int curFrame;
	int totalFrames;

	float timePerFrame;
	float timeWaited;

	int imageID;
	bool bIsPlaying;
	bool bIsLooping;

	float speed;

	////////////////////////////////////////////////////////////////////
	// Function: “cellalgorithm”
	//
	// Purpose: Algorithm function that finds location of the id you want
	//			on the sprite sheet.
	////////////////////////////////////////////////////////////////////
	RECT cellalgorithm(int id);

	///////////////////////////////////////////////////////////////////
	// Function: “reset”
	//
	// Purpose: Sets variables to their initial value.
	////////////////////////////////////////////////////////////////////
	void reset();

public:
	CSingleAnimation();
	~CSingleAnimation();

	//////////////////////////////////////////////////////
	//  Function: Accessors
	//
	//  Purpose : Returns the specified type.
	//////////////////////////////////////////////////////
	inline int GetImageID() {return imageID;}
	inline int GetCurFrame() {return curFrame;}

	//////////////////////////////////////
	//	Function:	Mutators
	//
	//	Purpose	:	To set the specified type
	///////////////////////////////////////
	inline void SetID(int id) { imageID = id;}
	inline void SetFrameWidth(int width) { frameWidth = width;}
	inline void SetFrameHeight(int height) { frameHeight = height;}
	inline void SetNumCols(int num) {numCols = num;}

	///////////////////////////////////////////////////////////////////
	// Function: “Load”
	//
	// Purpose: Sets all data needed for the font.
	////////////////////////////////////////////////////////////////////
	void Load(const char* file, int width, int height, int numcols, float time, int totalframe); 

	///////////////////////////////////////////////////////////////////
	// Function: “Unload”
	//
	// Purpose: Releases font texture from the texture manager.
	////////////////////////////////////////////////////////////////////
	void Unload(int id); 

	////////////////////////////////////////////////////////////////////
	// Function: “Update”
	//
	// Purpose: Updates game objects based on time.
	////////////////////////////////////////////////////////////////////
	void Update(float elspasedtime);

	///////////////////////////////////////////////////////////////////
	// Function: “Render”
	//
	// Purpose: Draws the animation frames to the screen at the specified location.
	////////////////////////////////////////////////////////////////////
	void Render(int posx, int posy, float scale = 1.0f, bool bFacingleft = false, DWORD dwColor = NULL);

	///////////////////////////////////////////////////////////////////
	// Function: “Play”
	//
	// Purpose: Restarts the animation from the beginning.
	////////////////////////////////////////////////////////////////////
	void Play();

	///////////////////////////////////////////////////////////////////
	// Function: “Stop”
	//
	// Purpose: Stops the animation at the current frame.
	////////////////////////////////////////////////////////////////////
	void Stop();
	
	///////////////////////////////////////////////////////////////////
	// Function: “Resume”
	//
	// Purpose: Starts the animation at the current frame.
	////////////////////////////////////////////////////////////////////
	void Resume();
};